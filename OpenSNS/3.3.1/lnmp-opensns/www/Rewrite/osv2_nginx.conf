##
# 将以下内容拷贝到相应的配置下面，只在根目录下安装OpenSNS V2有效，具体用法和服务器配置有关，请百度
##

#
# Nginx.txt
# v2.opensns.cn
# 

#禁止访问 View
if ($request_uri ~* (.*)/?View/(.*)?.html$) {
    return 403;
}

#系统首页
rewrite ^/?home_/(.*)?$                      /index.php?s=/home/index/index/$1 last;
rewrite ^/?home?$                             /index.php?s=/home/index/index last;

#积分商城
rewrite ^/?shop_/(.*)?$                      /index.php?s=/shop/index/index/$1 last;
rewrite ^/?shop$                              /index.php?s=/shop/index/index last;
rewrite ^/?goods/([0-9]+)((/|.).*)?$         /index.php?s=/shop/index/goods/category_id/$1$2 last;
rewrite ^/?goods_/(.*)?$                     /index.php?s=/shop/index/goods/$1 last;
rewrite ^/?goods$                             /index.php?s=/shop/index/goods last;
rewrite ^/?goods/detail_([0-9]+)((/|.).*)?$   /index.php?s=/shop/index/goodsdetail/id/$1$2 last;
rewrite ^/?mygoods/([0-9]+)((/|.).*)?$       /index.php?s=/shop/index/mygoods/status/$1$2 last;
rewrite ^/?mygoods_/(.*)?$                   /index.php?s=/shop/index/mygoods/$1 last;
rewrite ^/?mygoods$                           /index.php?s=/shop/index/mygoods last;

#活动
rewrite ^/?event/([0-9]+)/p_([0-9]+)((/|.).*)?$          /index.php?s=/event/index/index/type_id/$1/page/$2$3 last;
rewrite ^/?event/([0-9]+)((/|.).*)?$                     /index.php?s=/event/index/index/type_id/$1$2 last;
rewrite ^/?event/p_([0-9]+)((/|.).*)?$                   /index.php?s=/event/index/index/page/$1$2 last;
rewrite ^/?event_/(.*)?$                                  /index.php?s=/event/index/index/$1 last;
rewrite ^/?event$                                         /index.php?s=/event/index/index last;
rewrite ^/?myevent/([0-9]+)((/|.).*)?$                   /index.php?s=/event/index/myevent/type_id/$1$2 last;
rewrite ^/?myevent_/(.*)?$                               /index.php?s=/event/index/myevent/$1 last;
rewrite ^/?myevent$                                       /index.php?s=/event/index/myevent last;
rewrite ^/?event/detail_([0-9]+)((/|.).*)?$              /index.php?s=/event/index/detail/id/$1$2 last;
rewrite ^/?event/member_([0-9]+)((/|.).*)?$              /index.php?s=/event/index/member/id/$1$2 last;
rewrite ^/?event/edit_([0-9]+)((/|.).*)?$                /index.php?s=/event/index/edit/id/$1$2 last;
rewrite ^/?event/add_/(.*)?$                             /index.php?s=/event/index/add/$1 last;
rewrite ^/?event/add$                                     /index.php?s=/event/index/add last;

#专辑
rewrite ^/?issue/([0-9]+)/d_([a-z]+)/p_([0-9]+)((/|.).*)?$  /index.php?s=/issue/index/index/issue_id/$1/display_type/$2/page/$3$4 last;
rewrite ^/?issue/([0-9]+)/d_([a-z]+)((/|.).*)?$             /index.php?s=/issue/index/index/issue_id/$1/display_type/$2$3 last;
rewrite ^/?issue/([0-9]+)/p_([0-9]+)((/|.).*)?$             /index.php?s=/issue/index/index/issue_id/$1/page/$2$3 last;
rewrite ^/?issue/d_([a-z]+)/p_([0-9]+)((/|.).*)?$           /index.php?s=/issue/index/index/display_type/$1/page/$2$3 last;
rewrite ^/?issue/([0-9]+)((/|.).*)?$                        /index.php?s=/issue/index/index/issue_id/$1$2 last;
rewrite ^/?issue/d_([a-z]+)((/|.).*)?$                      /index.php?s=/issue/index/index/display_type/$1$2 last;
rewrite ^/?issue/p_([0-9]+)((/|.).*)?$                      /index.php?s=/issue/index/index/page/$1$2 last;
rewrite ^/?issue_/(.*)?$                                    /index.php?s=/issue/index/index/$1 last;
rewrite ^/?issue$                                            /index.php?s=/issue/index/index last;
rewrite ^/?issue/detail_([0-9]+)((/|.).*)?$                 /index.php?s=/issue/index/issuecontentdetail/id/$1$2 last;
rewrite ^/?issue/edit_([0-9]+)((/|.).*)?$                   /index.php?s=/issue/index/edit/id/$1$2 last;
rewrite ^/?issue/detail_/(.*)?$                             /index.php?s=/issue/index/issuecontentdetail/$1 last;
rewrite ^/?issue/edit_/(.*)?$                               /index.php?s=/issue/index/edit/$1 last;
rewrite ^/?issue/detail$                                     /index.php?s=/issue/index/issuecontentdetail last;
rewrite ^/?issue/edit$                                       /index.php?s=/issue/index/edit last;

#论坛
rewrite ^/?forum/([0-9]+)/p_([0-9]+)((/|.).*)?$              /index.php?s=/forum/index/forum/id/$1/page/$2$3 last;
rewrite ^/?forum/p_([0-9]+)((/|.).*)?$                       /index.php?s=/forum/index/forum/page/$1$2 last;
rewrite ^/?forum/([0-9]+)((/|.).*)?$                         /index.php?s=/forum/index/forum/id/$1$2 last;
rewrite ^/?forum_/(.*)?$                                     /index.php?s=/forum/index/forum/$1 last;
rewrite ^/?forum$                                             /index.php?s=/forum/index/index last;
rewrite ^/?forum/edit_([0-9]+)/p_([0-9]+)((/|.).*)?$         /index.php?s=/forum/index/edit/forum_id/$1/post_id/$2$3 last;
rewrite ^/?forum/editp_([0-9]+)((/|.).*)?$                   /index.php?s=/forum/index/edit/post_id/$1$2 last;
rewrite ^/?forum/edit_([0-9]+)((/|.).*)?$                    /index.php?s=/forum/index/edit/forum_id/$1$2 last;
rewrite ^/?forum/edit_/(.*)?$                                 /index.php?s=/forum/index/edit/$1 last;
rewrite ^/?forum/edit$                                        /index.php?s=/forum/index/edit last;
rewrite ^/?forum/detail_([0-9]+)((/|.).*)?$                  /index.php?s=/forum/index/detail/id/$1$2 last;
rewrite ^/?forum/detail_/(.*)?$                              /index.php?s=/forum/index/detail/$1 last;
rewrite ^/?forum/detail$                                      /index.php?s=/forum/index/detail last;
rewrite ^/?forum/search_/(.*)?$                              /index.php?s=/forum/index/search/$1 last;
rewrite ^/?forum/search$                                     /index.php?s=/forum/index/search last;
rewrite ^/?forum/look_/(.*)?$                                /index.php?s=/forum/index/look/$1 last;
rewrite ^/?forum/look$                                       /index.php?s=/forum/index/look last;
rewrite ^/?forum/lists_/(.*)?$                                /index.php?s=/forum/index/lists/$1 last;
rewrite ^/?forum/lists$                                       /index.php?s=/forum/index/lists last;

#资讯
rewrite ^/?news/([0-9]+)/p_([0-9]+)((/|.).*)?$              /index.php?s=/news/index/index/category/$1/page/$2$3 last;
rewrite ^/?news/p_([0-9]+)((/|.).*)?$                       /index.php?s=/news/index/index/page/$1$2 last;
rewrite ^/?news/([0-9]+)((/|.).*)?$                         /index.php?s=/news/index/index/category/$1$2 last;
rewrite ^/?news_/(.*)?$                                     /index.php?s=/news/index/index/$1 last;
rewrite ^/?news$                                             /index.php?s=/news/index/index last;
rewrite ^/?mynews/p_([0-9]+)((/|.).*)?$                     /index.php?s=/news/index/my/page/$1$2 last;
rewrite ^/?mynews_/(.*)?$                                    /index.php?s=/news/index/my/$1 last;
rewrite ^/?mynews$                                           /index.php?s=/news/index/my last;
rewrite ^/?news/detail_([0-9]+)((/|.).*)?$                  /index.php?s=/news/index/detail/id/$1$2 last;
rewrite ^/?news/detail_/(.*)?$                              /index.php?s=/news/index/detail/$1 last;
rewrite ^/?news/detail$                                      /index.php?s=/news/index/detail last;
rewrite ^/?news/edit_([0-9]+)((/|.).*)?$                    /index.php?s=/news/index/edit/id/$1$2 last;
rewrite ^/?news/edit_/(.*)?$                                /index.php?s=/news/index/edit/$1 last;
rewrite ^/?news/edit$                                       /index.php?s=/news/index/edit last;

#动弹
rewrite ^/?weibo/t_([a-z]+)/p_([0-9]+)((/|.).*)?$         /index.php?s=/weibo/index/index/type/$1/page/$2$3 last;
rewrite ^/?weibo/t_([a-z]+)((/|.).*)?$                    /index.php?s=/weibo/index/index/type/$1$2 last;
rewrite ^/?weibo/p_([0-9]+)((/|.).*)?$                    /index.php?s=/weibo/index/index/page/$1$2 last;
rewrite ^/?weibo_/(.*)?$                                  /index.php?s=/weibo/index/index/$1 last;
rewrite ^/?weibo$                                          /index.php?s=/weibo/index/index last;
rewrite ^/?weibo/detail_([0-9]+)((/|.).*)?$               /index.php?s=/weibo/index/weibodetail/id/$1$2 last;
rewrite ^/?weibo/detail_/(.*)?$                           /index.php?s=/weibo/index/weibodetail/$1 last;
rewrite ^/?weibo/detail$                                   /index.php?s=/weibo/index/weibodetail last;
rewrite ^/?weibo/concerned_/(.*)?$                        /index.php?s=/weibo/index/myconcerned/$1 last;
rewrite ^/?weibo/concerned$                                /index.php?s=/weibo/index/myconcerned last;
rewrite ^/?weibo/search_/(.*)?$                           /index.php?s=/weibo/index/search/$1 last;
rewrite ^/?weibo/search$                                  /index.php?s=/weibo/index/search last;
rewrite ^/?topic_([0-9]+)((/|.).*)?$                      /index.php?s=/weibo/topic/topic/type/$1$2 last;
rewrite ^/?topic_/(.*)?$                                   /index.php?s=/weibo/topic/topic/$1 last;
rewrite ^/?topic$                                          /index.php?s=/weibo/topic/topic last;

#群组
rewrite ^/?group/p_([0-9]+)((/|.).*)?$                               /index.php?s=/group/index/index/page/$1$2 last;
rewrite ^/?group_/(.*)?$                                             /index.php?s=/group/index/index/$1 last;
rewrite ^/?group$                                                     /index.php?s=/group/index/index last;
rewrite ^/?groups/([0-9]+)/p_([0-9]+)((/|.).*)?$                     /index.php?s=/group/index/groups/cate/$1/page/$2$3 last;
rewrite ^/?groups/([0-9]+)((/|.).*)?$                                 /index.php?s=/group/index/groups/cate/$1$2 last;
rewrite ^/?groups/p_([0-9]+)((/|.).*)?$                               /index.php?s=/group/index/groups/page/$1$2 last;
rewrite ^/?groups_/(.*)?$                                             /index.php?s=/group/index/groups/$1 last;
rewrite ^/?groups$                                                     /index.php?s=/group/index/groups last;
rewrite ^/?mygroup/p_([0-9]+)((/|.).*)?$                              /index.php?s=/group/index/mygroup/page/$1$2 last;
rewrite ^/?mygroup_/(.*)?$                                             /index.php?s=/group/index/mygroup/$1 last;
rewrite ^/?mygroup$                                                    /index.php?s=/group/index/mygroup last;
rewrite ^/?onegroup/([A-Za-z]+)/([0-9]+)((/|.).*)?$                   /index.php?s=/group/index/group/id/$2/type/$1$3 last;
rewrite ^/?onegroup/([0-9]+)/([0-9]+)((/|.).*)?$                      /index.php?s=/group/index/group/id/$1/cate/$2$3 last;
rewrite ^/?onegroup/([0-9]+)((/|.).*)?$                               /index.php?s=/group/index/group/id/$1$2 last;
rewrite ^/?onegroup_/(.*)?$                                            /index.php?s=/group/index/group/$1 last;
rewrite ^/?onegroup$                                                   /index.php?s=/group/index/group last;
rewrite ^/?group/detail_([0-9]+)((/|.).*)?$                           /index.php?s=/group/index/detail/id/$1$2 last;
rewrite ^/?group/detail_/(.*)?$                                       /index.php?s=/group/index/detail/$1 last;
rewrite ^/?group/detail$                                               /index.php?s=/group/index/detail last;
rewrite ^/?group/edit_([0-9]+)((/|.).*)?$                             /index.php?s=/group/index/edit/group_id/$1$2 last;
rewrite ^/?group/edit([0-9]+)((/|.).*)?$                              /index.php?s=/group/index/edit/post_id/$1$2 last;
rewrite ^/?group/edit_/(.*)?$                                         /index.php?s=/group/index/edit/$1 last;
rewrite ^/?group/edit$                                                 /index.php?s=/group/index/edit last;
rewrite ^/?group/create_/(.*)?$                                       /index.php?s=/group/index/create/$1 last;
rewrite ^/?group/create$                                               /index.php?s=/group/index/create last;
rewrite ^/?group/manage_([0-9]+)((/|.).*)?$                           /index.php?s=/group/manage/index/group_id/$1$2 last;
rewrite ^/?group/manage_/(.*)?$                                       /index.php?s=/group/manage/index/$1 last;
rewrite ^/?group/manage$                                               /index.php?s=/group/manage/index last;
rewrite ^/?group/member_([0-9]+)/([0-3]+)((/|.).*)?$                  /index.php?s=/group/manage/member/group_id/$1/status/$2$3 last;
rewrite ^/?group/member_([0-9]+)(.*)?$                                /index.php?s=/group/manage/member/group_id/$1$2 last;
rewrite ^/?group/member_/(.*)?$                                       /index.php?s=/group/manage/member/$1 last;
rewrite ^/?group/member$                                               /index.php?s=/group/manage/member last;
rewrite ^/?group/notice_([0-9]+)((/|.).*)?$                           /index.php?s=/group/manage/notice/group_id/$1$2 last;
rewrite ^/?group/notice_/(.*)?$                                       /index.php?s=/group/manage/notice/$1 last;
rewrite ^/?group/notice$                                               /index.php?s=/group/manage/notice last;
rewrite ^/?group/category_([0-9]+)((/|.).*)?$                         /index.php?s=/group/manage/category/group_id/$1$2 last;
rewrite ^/?group/category_/(.*)?$                                      /index.php?s=/group/manage/category/$1 last;
rewrite ^/?group/category$                                             /index.php?s=/group/manage/category last;
rewrite ^/?group/discover_/(.*)?$                                      /index.php?s=/group/index/discover/$1 last;
rewrite ^/?group/discover$                                             /index.php?s=/group/index/discover last;
rewrite ^/?group/my_/(.*)?$                                            /index.php?s=/group/index/my/$1 last;
rewrite ^/?group/my$                                                   /index.php?s=/group/index/my last;
rewrite ^/?group/select_/(.*)?$                                        /index.php?s=/group/index/select/$1 last;
rewrite ^/?group/select$                                               /index.php?s=/group/index/select last;

#用户中心
rewrite ^/?ucenter/([0-9]+)((/|.).*)?$                               /index.php?s=/ucenter/index/index/uid/$1$2 last;
rewrite ^/?ucenter_/(.*)?$                                           /index.php?s=/ucenter/index/index/$1 last;
rewrite ^/?ucenter$                                                   /index.php?s=/ucenter/index/index last;
rewrite ^/?ucenter/following_([0-9]+)((/|.).*)?$                      /index.php?s=/ucenter/index/following/uid/$1$2 last;
rewrite ^/?ucenter/following_/(.*)?$                                   /index.php?s=/ucenter/index/following/$1 last;
rewrite ^/?ucenter/following$                                          /index.php?s=/ucenter/index/following last;
rewrite ^/?ucenter/applist_([A-Za-z]+)/([0-9]+)((/|.).*)?$            /index.php?s=/ucenter/index/applist/type/$1/uid/$2$3 last;
rewrite ^/?ucenter/applist_([A-Za-z]+)((/|.).*)?$                     /index.php?s=/ucenter/index/applist/type/$1$2 last;
rewrite ^/?ucenter/applist_([0-9]+)((/|.).*)?$                        /index.php?s=/ucenter/index/applist/uid/$1$2 last;
rewrite ^/?ucenter/applist_/(.*)?$                                    /index.php?s=/ucenter/index/applist/$1 last;
rewrite ^/?ucenter/applist$                                            /index.php?s=/ucenter/index/applist last;
rewrite ^/?ucenter/information_([0-9]+)((/|.).*)?$                      /index.php?s=/ucenter/index/information/uid/$1$2 last;
rewrite ^/?ucenter/information_/(.*)?$                                  /index.php?s=/ucenter/index/information/$1 last;
rewrite ^/?ucenter/information$                                          /index.php?s=/ucenter/index/information last;
rewrite ^/?ucenter/fans_([0-9]+)((/|.).*)?$                           /index.php?s=/ucenter/index/fans/uid/$1$2 last;
rewrite ^/?ucenter/fans_/(.*)?$                                       /index.php?s=/ucenter/index/fans/$1 last;
rewrite ^/?ucenter/fans$                                               /index.php?s=/ucenter/index/fans last;
rewrite ^/?ucenter/rank_([0-9]+)((/|.).*)?$                           /index.php?s=/ucenter/index/rank/uid/$1$2 last;
rewrite ^/?ucenter/rank_/(.*)?$                                       /index.php?s=/ucenter/index/rank/$1 last;
rewrite ^/?ucenter/rank$                                               /index.php?s=/ucenter/index/rank last;
rewrite ^/?ucenter/rankwait_([0_9]+)((/|.).*)?$                       /index.php?s=/ucenter/index/rankverifywait/uid/$1$2 last;
rewrite ^/?ucenter/rankwait_/(.*)?$                                    /index.php?s=/ucenter/index/rankverifywait/$1 last;
rewrite ^/?ucenter/rankwait$                                           /index.php?s=/ucenter/index/rankverifywait last;
rewrite ^/?ucenter/rankfailure_([0-9]+)((/|.).*)?$                    /index.php?s=/ucenter/index/rankverifyfailure/uid/$1$2 last;
rewrite ^/?ucenter/rankfailure_/(.*)?$                                 /index.php?s=/ucenter/index/rankverifyfailure/$1 last;
rewrite ^/?ucenter/rankfailure$                                        /index.php?s=/ucenter/index/rankverifyfailure last;
rewrite ^/?ucenter/rankverify_([0-9]+)((/|.).*)?$                     /index.php?s=/ucenter/index/rankverify/uid/$1$2 last;
rewrite ^/?ucenter/rankverify_/(.*)?$                                 /index.php?s=/ucenter/index/rankverify/$1 last;
rewrite ^/?ucenter/rankverify$                                         /index.php?s=/ucenter/index/rankverify last;
rewrite ^/?ucenter/conf_/(.*)?$                                       /index.php?s=/ucenter/config/index/$1 last;
rewrite ^/?ucenter/conf$                                               /index.php?s=/ucenter/config/index last;
rewrite ^/?ucenter/tag_/(.*)?$                                        /index.php?s=/ucenter/config/tag/$1 last;
rewrite ^/?ucenter/tag$                                                /index.php?s=/ucenter/config/tag last;
rewrite ^/?ucenter/avatar_/(.*)?$                                     /index.php?s=/ucenter/config/avatar/$1 last;
rewrite ^/?ucenter/avatar$                                             /index.php?s=/ucenter/config/avatar last;
rewrite ^/?ucenter/password_/(.*)?$                                   /index.php?s=/ucenter/config/password/$1 last;
rewrite ^/?ucenter/password$                                           /index.php?s=/ucenter/config/password last;
rewrite ^/?ucenter/score_/(.*)?$                                      /index.php?s=/ucenter/config/score/$1 last;
rewrite ^/?ucenter/score$                                              /index.php?s=/ucenter/config/score last;
rewrite ^/?ucenter/role_/(.*)?$                                       /index.php?s=/ucenter/config/role/$1 last;
rewrite ^/?ucenter/role$                                               /index.php?s=/ucenter/config/role last;
rewrite ^/?ucenter/other_/(.*)?$                                      /index.php?s=/ucenter/config/other/$1 last;
rewrite ^/?ucenter/other$                                              /index.php?s=/ucenter/config/other last;
rewrite ^/?ucenter/session_/(.*)?$                                    /index.php?s=/ucenter/message/session/$1 last;
rewrite ^/?ucenter/session$                                            /index.php?s=/ucenter/message/session last;
rewrite ^/?ucenter/msg_([a-z]+)((/|.).*)?$                            /index.php?s=/ucenter/message/message/tab/$1$2 last;
rewrite ^/?ucenter/msg_/(.*)?$                                        /index.php?s=/ucenter/message/message/$1 last;
rewrite ^/?ucenter/msg$                                                /index.php?s=/ucenter/message/message last;
rewrite ^/?ucenter/collection_([a-z]+)((/|.).*)?$                     /index.php?s=/ucenter/collection/index/type/$1$2 last;
rewrite ^/?ucenter/collection_/(.*)?$                                 /index.php?s=/ucenter/collection/index/$1 last;
rewrite ^/?ucenter/collection$                                         /index.php?s=/ucenter/collection/index last;
rewrite ^/?ucenter/invite_/(.*)?$                                     /index.php?s=/ucenter/invite/invite/$1 last;
rewrite ^/?ucenter/invite$                                             /index.php?s=/ucenter/invite/invite last;
rewrite ^/?ucenter/invite_create_/(.*)?$                               /index.php?s=/ucenter/invite/index/$1 last;
rewrite ^/?ucenter/invite_create$                                      /index.php?s=/ucenter/invite/index last;

#会员
rewrite ^/?people_/(.*)?$                                           /index.php?s=/people/index/index/$1 last;
rewrite ^/?people$                                                   /index.php?s=/people/index/index last;

#注册登录
rewrite ^/?login_/(.*)?$                                             /index.php?s=/ucenter/member/login/$1 last;
rewrite ^/?login$                                                     /index.php?s=/ucenter/member/login last;
rewrite ^/?register/step_([a-z_]+)((/|.).*)?$                         /index.php?s=/ucenter/member/step/step/$1$2 last;
rewrite ^/?register/([a-z]+)/c_([a-zA-Z0-9]+)((/|.).*)?$             /index.php?s=/ucenter/member/register/type/$1/code/$2$3 last;
rewrite ^/?register/c_([a-zA-Z0-9]+)((/|.).*)?$                      /index.php?s=/ucenter/member/register/code/$1$2 last;
rewrite ^/?register/([a-z]+)((/|.).*)?$                              /index.php?s=/ucenter/member/register/type/$1$2 last;
rewrite ^/?register_/(.*)?$                                          /index.php?s=/ucenter/member/register/$1 last;
rewrite ^/?register$                                                  /index.php?s=/ucenter/member/register last;

#文章
rewrite ^/?paper_([0-9]+)((/|.).*)?$                                 /index.php?s=/paper/index/index/id/$1$2 last;
rewrite ^/?paper_/(.*)?$                                             /index.php?s=/paper/index/index/$1 last;
rewrite ^/?paper$                                                     /index.php?s=/paper/index/index last;

#微店
rewrite ^/?store_/(.*)?$                                               /index.php?s=/store/index/index/$1 last;
rewrite ^/?store$                                                       /index.php?s=/store/index/index last;
rewrite ^/?store/li_([0-9]+)_([A-Za-z]+)((/|.).*)?$                    /index.php?s=/store/index/li/type/$1/name/$2$3 last;
rewrite ^/?store/li_([A-Za-z]+)((/|.).*)?$                             /index.php?s=/store/index/li/name/$1$2 last;
rewrite ^/?store/li_([0-9]+)((/|.).*)?$                                /index.php?s=/store/index/li/type/$1$2 last;
rewrite ^/?store/li_/(.*)?$                                            /index.php?s=/store/index/li/$1 last;
rewrite ^/?store/li$                                                    /index.php?s=/store/index/li last;
rewrite ^/?store/search_/(.*)?$                                        /index.php?s=/store/index/search/$1 last;
rewrite ^/?store/search$                                                /index.php?s=/store/index/search last;
rewrite ^/?store/info_([0-9]+)((/|.).*)?$                              /index.php?s=/store/index/info/info_id/$1$2 last;
rewrite ^/?store/info_/(.*)?$                                           /index.php?s=/store/index/info/$1 last;
rewrite ^/?store/info$                                                  /index.php?s=/store/index/info last;
rewrite ^/?stores/([0-9]+)((/|.).*)?$                                  /index.php?s=/store/shop/lists/page/$1$2 last;
rewrite ^/?stores_/(.*)?$                                              /index.php?s=/store/shop/lists/$1 last;
rewrite ^/?stores$                                                      /index.php?s=/store/shop/lists last;
rewrite ^/?onestore/([0-9]+)((/|.).*)?$                                /index.php?s=/store/shop/detail/id/$1$2 last;
rewrite ^/?onestore_/(.*)?$                                             /index.php?s=/store/shop/detail/$1 last;
rewrite ^/?onestore$                                                    /index.php?s=/store/shop/detail last;
rewrite ^/?onestore/goods_([0-9]+)((/|.).*)?$                          /index.php?s=/store/shop/goods/id/$1$2 last;
rewrite ^/?onestore/goods_/(.*)?$                                      /index.php?s=/store/shop/goods/$1 last;
rewrite ^/?onestore/goods$                                              /index.php?s=/store/shop/goods last;
rewrite ^/?userstore/detail_/(.*)?$                                     /index.php?s=/store/center/detail/$1 last;
rewrite ^/?userstore/detail$                                            /index.php?s=/store/center/detail last;
rewrite ^/?userstore/buy_/(.*)?$                                        /index.php?s=/store/center/buy/$1 last;
rewrite ^/?userstore/buy$                                               /index.php?s=/store/center/buy last;
rewrite ^/?userstore/pay_/(.*)?$                                        /index.php?s=/store/center/pay/$1 last;
rewrite ^/?userstore/pay$                                               /index.php?s=/store/center/pay last;
rewrite ^/?userstore/orders_/(.*)?$                                     /index.php?s=/store/center/orders/$1 last;
rewrite ^/?userstore/orders$                                            /index.php?s=/store/center/orders last;
rewrite ^/?userstore/payorder_([0-9]+)((/|.).*)?$                      /index.php?s=/store/center/payorder/id/$1$2 last;
rewrite ^/?userstore/payorder_/(.*)?$                                   /index.php?s=/store/center/payorder/$1 last;
rewrite ^/?userstore/payorder$                                          /index.php?s=/store/center/payorder last;
rewrite ^/?userstore/response_([0-9]+)((/|.).*)?$                      /index.php?s=/store/center/response/s/$1$2 last;
rewrite ^/?userstore/response_/(.*)?$                                   /index.php?s=/store/center/response/$1 last;
rewrite ^/?userstore/response$                                          /index.php?s=/store/center/response last;
rewrite ^/?userstore/fav_([0-9]+)((/|.).*)?$                           /index.php?s=/store/center/fav/id/$1$2 last;
rewrite ^/?userstore/fav_/(.*)?$                                        /index.php?s=/store/center/fav/$1 last;
rewrite ^/?userstore/fav$                                               /index.php?s=/store/center/fav last;
rewrite ^/?userstore/create_([a-z]+)((/|.).*)?$                        /index.php?s=/store/center/createshop/name/$1$2 last;
rewrite ^/?userstore/create_/(.*)?$                                     /index.php?s=/store/center/createshop/$1 last;
rewrite ^/?userstore/create$                                            /index.php?s=/store/center/createshop last;
rewrite ^/?userstore/post_([0-9]+)((/|.).*)?$                           /index.php?s=/store/center/post/entity_id/$1$2 last;
rewrite ^/?userstore/post_/(.*)?$                                        /index.php?s=/store/center/post/$1 last;
rewrite ^/?userstore/post$                                               /index.php?s=/store/center/post last;
rewrite ^/?userstore/selling_([0-9]+)((/|.).*)?$                        /index.php?s=/store/center/selling/page/$1$2 last;
rewrite ^/?userstore/selling_/(.*)?$                                     /index.php?s=/store/center/selling/$1 last;
rewrite ^/?userstore/selling$                                            /index.php?s=/store/center/selling last;
rewrite ^/?userstore/sold_/(.*)?$                                        /index.php?s=/store/center/sold/$1 last;
rewrite ^/?userstore/sold$                                               /index.php?s=/store/center/sold last;

#分类信息
rewrite ^/?cat_/(.*)?$                                                  /index.php?s=/cat/index/index/$1 last;
rewrite ^/?cat$                                                         /index.php?s=/cat/index/index last;
rewrite ^/?cat/li_([A-Za-z]+)((/|.).*)?$                                /index.php?s=/cat/index/li/name/$1$2 last;
rewrite ^/?cat/li_/(.*)?$                                               /index.php?s=/cat/index/li/$1 last;
rewrite ^/?cat/li$                                                       /index.php?s=/cat/index/li last;
rewrite ^/?cat/info_([0-9]+)((/|.).*)?$                                 /index.php?s=/cat/index/info/info_id/$1$2 last;
rewrite ^/?cat/info_/(.*)?$                                             /index.php?s=/cat/index/info/$1 last;
rewrite ^/?cat/info$                                                     /index.php?s=/cat/index/info last;
rewrite ^/?cat/post_([A-Za-z]+)((/|.).*)?$                              /index.php?s=/cat/index/post/name/$1$2 last;
rewrite ^/?cat/post_/(.*)?$                                              /index.php?s=/cat/index/post/$1 last;
rewrite ^/?cat/post$                                                     /index.php?s=/cat/index/post last;
rewrite ^/?cat/my_([0-9]+)((/|.).*)?$                                   /index.php?s=/cat/center/my/id/$1$2 last;
rewrite ^/?cat/my_/(.*)?$                                                /index.php?s=/cat/center/my/$1 last;
rewrite ^/?cat/my$                                                       /index.php?s=/cat/center/my last;
rewrite ^/?cat/fav_([0-9]+)((/|.).*)?$                                   /index.php?s=/cat/center/fav/id/$1$2 last;
rewrite ^/?cat/fav_/(.*)?$                                                /index.php?s=/cat/center/fav/$1 last;
rewrite ^/?cat/fav$                                                       /index.php?s=/cat/center/fav last;
rewrite ^/?cat/rec_/(.*)?$                                                /index.php?s=/cat/center/rec/$1 last;
rewrite ^/?cat/rec$                                                       /index.php?s=/cat/center/rec last;
rewrite ^/?cat/send_/(.*)?$                                               /index.php?s=/cat/center/send/$1 last;
rewrite ^/?cat/send$                                                       /index.php?s=/cat/center/send last;
rewrite ^/?usercat/post_/(.*)?$                                           /index.php?s=/cat/center/post/$1 last;
rewrite ^/?usercat/post$                                                   /index.php?s=/cat/center/post last;

#问答
rewrite ^/?question/p_([0-9]+)(([/|.]+).*)?$                            /index.php?s=/question/index/waitanswer/page/$1$2 last;
rewrite ^/?question_/(.*)?$                                              /index.php?s=/question/index/waitanswer/$1 last;
rewrite ^/?question$                                                     /index.php?s=/question/index/waitanswer last;
rewrite ^/?goodquestion/p_([0-9]+)(([/|.]+).*)?$                        /index.php?s=/question/index/goodquestion/page/$1$2 last;
rewrite ^/?goodquestion_/(.*)?$                                          /index.php?s=/question/index/goodquestion/$1 last;
rewrite ^/?goodquestion$                                                 /index.php?s=/question/index/goodquestion last;
rewrite ^/?myquestion/([a-z]+)/p_([0-9]+)(([/|.]+).*)?$                 /index.php?s=/question/index/myquestion/type/$1/page/$2$3 last;
rewrite ^/?myquestion/([a-z]+)(([/|.]+).*)?$                            /index.php?s=/question/index/myquestion/type/$1$2 last;
rewrite ^/?myquestion/p_([0-9]+)(([/|.]+).*)?$                          /index.php?s=/question/index/myquestion/page/$1$2 last;
rewrite ^/?myquestion_/(.*)?$                                           /index.php?s=/question/index/myquestion/$1 last;
rewrite ^/?myquestion$                                                   /index.php?s=/question/index/myquestion last;
rewrite ^/?questions/([0-9]+)/p_([0-9]+)(([/|.]+).*)?$                  /index.php?s=/question/index/questions/category/$1/page/$2$3 last;
rewrite ^/?questions/p_([0-9]+)(([/|.]+).*)?$                           /index.php?s=/question/index/questions/page/$1$2 last;
rewrite ^/?questions/([0-9]+)(([/|.]+).*)?$                             /index.php?s=/question/index/questions/category/$1$2 last;
rewrite ^/?questions_/(.*)?$                                             /index.php?s=/question/index/questions/$1 last;
rewrite ^/?questions$                                                    /index.php?s=/question/index/questions last;
rewrite ^/?question/edit_([0-9]+)(([/|.]+).*)?$                         /index.php?s=/question/index/edit/id/$1$2 last;
rewrite ^/?question/edit_/(.*)?$                                         /index.php?s=/question/index/edit/$1 last;
rewrite ^/?question/edit$                                                /index.php?s=/question/index/edit last;
rewrite ^/?question/detail_([0-9]+)(([/|.]+).*)?$                       /index.php?s=/question/index/detail/id/$1$2 last;
rewrite ^/?question/detail_/(.*)?$                                       /index.php?s=/question/index/detail/$1 last;
rewrite ^/?question/detail$                                              /index.php?s=/question/index/detail last;
rewrite ^/?question/editanswer_([0-9]+)(([/|.]+).*)?$                   /index.php?s=/question/answer/edit/answer_id/$1$2 last;
rewrite ^/?question/editanswer_/(.*)?$                                   /index.php?s=/question/answer/edit/$1 last;
rewrite ^/?question/editanswer$                                          /index.php?s=/question/answer/edit last;

#充值
rewrite ^/?recharge_/(.*)?$                                             /index.php?s=/recharge/index/recharge/$1 last;
rewrite ^/?recharge$                                                    /index.php?s=/recharge/index/recharge last;
rewrite ^/?rechargelist/([0-9]+)(([/|.]+).*)?$                          /index.php?s=/recharge/index/rechargelist/payok/$1$2 last;
rewrite ^/?rechargelist_/(.*)?$                                         /index.php?s=/recharge/index/rechargelist/$1 last;
rewrite ^/?rechargelist$                                                 /index.php?s=/recharge/index/rechargelist last;
rewrite ^/?withdrawlist/([0-9]+)(([/|.]+).*)?$                          /index.php?s=/recharge/index/withdrawlist/payok/$1$2 last;
rewrite ^/?withdrawlist_/(.*)?$                                         /index.php?s=/recharge/index/withdrawlist/$1 last;
rewrite ^/?withdrawlist$                                                 /index.php?s=/recharge/index/withdrawlist last;

#云市场
rewrite ^/?appstore_/(.*)?$                                             /index.php?s=/appstore/index/index/$1 last;
rewrite ^/?appstore$                                                    /index.php?s=/appstore/index/index last;
rewrite ^/?appstore/feed_/(.*)?$                                        /index.php?s=/appstore/index/feed/$1 last;
rewrite ^/?appstore/feed$                                               /index.php?s=/appstore/index/feed last;
rewrite ^/?appstore/plugin_([0-9]+)(([/|.]+).*)?$                      /index.php?s=/appstore/index/plugin/tid/$1$2 last;
rewrite ^/?appstore/plugin_/(.*)?$                                      /index.php?s=/appstore/index/plugin/$1 last;
rewrite ^/?appstore/plugin$                                             /index.php?s=/appstore/index/plugin last;
rewrite ^/?appstore/module_([0-9]+)(([/|.]+).*)?$                      /index.php?s=/appstore/index/module/tid/$1$2 last;
rewrite ^/?appstore/module_/(.*)?$                                      /index.php?s=/appstore/index/module/$1 last;
rewrite ^/?appstore/module$                                             /index.php?s=/appstore/index/module last;
rewrite ^/?appstore/theme_([0-9]+)(([/|.]+).*)?$                       /index.php?s=/appstore/index/theme/tid/$1$2 last;
rewrite ^/?appstore/theme_/(.*)?$                                       /index.php?s=/appstore/index/theme/$1 last;
rewrite ^/?appstore/theme$                                              /index.php?s=/appstore/index/theme last;
rewrite ^/?appstore/developer/p_([0-9]+)(([/|.]+).*)?$                 /index.php?s=/appstore/index/developer/page/$1$2 last;
rewrite ^/?appstore/developer_/(.*)?$                                   /index.php?s=/appstore/index/developer/$1 last;
rewrite ^/?appstore/developer$                                          /index.php?s=/appstore/index/developer last;
rewrite ^/?appstore/addplugin_([0-9]+)(([/|.]+).*)?$                    /index.php?s=/appstore/admin/addplugin/id/$1$2 last;
rewrite ^/?appstore/addplugin_/(.*)?$                                   /index.php?s=/appstore/admin/addplugin/$1 last;
rewrite ^/?appstore/addplugin$                                          /index.php?s=/appstore/admin/addplugin last;
rewrite ^/?appstore/addmodule_([0-9]+)(([/|.]+).*)?$                    /index.php?s=/appstore/admin/addmodule/id/$1$2 last;
rewrite ^/?appstore/addmodule_/(.*)?$                                   /index.php?s=/appstore/admin/addmodule/$1 last;
rewrite ^/?appstore/addmodule$                                          /index.php?s=/appstore/admin/addmodule last;
rewrite ^/?appstore/addtheme_([0-9]+)(([/|.]+).*)?$                    /index.php?s=/appstore/admin/addtheme/id/$1$2 last;
rewrite ^/?appstore/addtheme_/(.*)?$                                   /index.php?s=/appstore/admin/addtheme/$1 last;
rewrite ^/?appstore/addtheme$                                           /index.php?s=/appstore/admin/addtheme last;
rewrite ^/?appstore/plugindetail_([0-9]+)(([/|.]+).*)?$                /index.php?s=/appstore/index/plugindetail/id/$1$2 last;
rewrite ^/?appstore/plugindetail_/(.*)?$                                /index.php?s=/appstore/index/plugindetail/$1 last;
rewrite ^/?appstore/plugindetail$                                        /index.php?s=/appstore/index/plugindetail last;
rewrite ^/?appstore/moduledetail_([0-9]+)(([/|.]+).*)?$                 /index.php?s=/appstore/index/moduledetail/id/$1$2 last;
rewrite ^/?appstore/moduledetail_/(.*)?$                                /index.php?s=/appstore/index/moduledetail/$1 last;
rewrite ^/?appstore/moduledetail$                                        /index.php?s=/appstore/index/moduledetail last;
rewrite ^/?appstore/themedetail_([0-9]+)(([/|.]+).*)?$                 /index.php?s=/appstore/index/themedetail/id/$1$2 last;
rewrite ^/?appstore/themedetail_/(.*)?$                                 /index.php?s=/appstore/index/themedetail/$1 last;
rewrite ^/?appstore/themedetail$                                        /index.php?s=/appstore/index/themedetail last;
rewrite ^/?appstore/addversion_([0-9]+)(([/|.]+).*)?$                   /index.php?s=/appstore/admin/addversion/id/$1$2 last;
rewrite ^/?appstore/addversion_/(.*)?$                                  /index.php?s=/appstore/admin/addversion/$1 last;
rewrite ^/?appstore/addversion$                                          /index.php?s=/appstore/admin/addversion last;
rewrite ^/?appstore/editversion_([0-9]+)(([/|.]+).*)?$                   /index.php?s=/appstore/admin/editversion/id/$1$2 last;
rewrite ^/?appstore/editversion_/(.*)?$                                  /index.php?s=/appstore/admin/editversion/$1 last;
rewrite ^/?appstore/editversion$                                          /index.php?s=/appstore/admin/editversion last;
rewrite ^/?appstore/delversion_([0-9]+)(([/|.]+).*)?$                    /index.php?s=/appstore/admin/delversion/id/$1$2 last;
rewrite ^/?appstore/delversion_/(.*)?$                                   /index.php?s=/appstore/admin/delversion/$1 last;
rewrite ^/?appstore/delversion$                                           /index.php?s=/appstore/admin/delversion last;
rewrite ^/?appstore/setup_([0-9]+)(([/|.]+).*)?$                         /index.php?s=/appstore/index/setup/id/$1$2 last;
rewrite ^/?appstore/setup_/(.*)?$                                         /index.php?s=/appstore/index/setup/$1 last;
rewrite ^/?appstore/setup$                                                /index.php?s=/appstore/index/setup last;
rewrite ^/?appstore/download_([0-9]+)(([/|.]+).*)?$                      /index.php?s=/appstore/index/download/id/$1$2 last;
rewrite ^/?appstore/download_/(.*)?$                                      /index.php?s=/appstore/index/download/$1 last;
rewrite ^/?appstore/download$                                             /index.php?s=/appstore/index/download last;
rewrite ^/?appstore/verify_/(.*)?$                                        /index.php?s=/appstore/admin/verify/$1 last;
rewrite ^/?appstore/verify$                                               /index.php?s=/appstore/admin/verify last;
rewrite ^/?appstore/my_/(.*)?$                                            /index.php?s=/appstore/admin/my/$1 last;
rewrite ^/?appstore/my$                                                   /index.php?s=/appstore/admin/my last;
rewrite ^/?appstore/myplugin_/(.*)?$                                      /index.php?s=/appstore/admin/myplugin/$1 last;
rewrite ^/?appstore/myplugin$                                             /index.php?s=/appstore/admin/myplugin last;
rewrite ^/?appstore/mymodule_/(.*)?$                                      /index.php?s=/appstore/admin/mymodule/$1 last;
rewrite ^/?appstore/mymodule$                                             /index.php?s=/appstore/admin/mymodule last;
rewrite ^/?appstore/mygoods_([0-9]+)(([/|.]+).*)?$                       /index.php?s=/appstore/admin/mygoods/payed/$1$2 last;
rewrite ^/?appstore/mygoods_/(.*)?$                                       /index.php?s=/appstore/admin/mygoods/$1 last;
rewrite ^/?appstore/mygoods$                                              /index.php?s=/appstore/admin/mygoods last;
rewrite ^/?appstore/myorder_/(.*)?$                                       /index.php?s=/appstore/admin/order/$1 last;
rewrite ^/?appstore/myorder$                                              /index.php?s=/appstore/admin/order last;
rewrite ^/?appstore/bind_/(.*)?$                                          /index.php?s=/appstore/admin/bind/$1 last;
rewrite ^/?appstore/bind$                                                 /index.php?s=/appstore/admin/bind last;

#默认情况
# Warning: unsupported_condition at line 134:
#     RewriteCond %{REQUEST_FiLENAME} !-d

# Warning: unsupported_flag at line 136:
#     RewriteRule ^/?(.*)$ /index.php?s=/$1 [QSA,PT,L]
if (!-f $request_filename){
rewrite ^/(.*)$ /index.php?s=$1 last;
break;
}